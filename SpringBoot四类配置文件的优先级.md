
### 一、 四级配置文件与优先级

Spring Boot 允许将配置文件放在四个不同的位置，它们按照**确定的顺序**被加载，高优先级的配置可以覆盖低优先级的配置。

| 层级     | 路径示例                               | 优先级    | 说明                                 |
| ------ | ---------------------------------- | ------ | ---------------------------------- |
| **1级** | `file:config/application.yml`      | **最高** | 位于**项目（jar包）当前目录**下的 `config`文件夹中。 |
| **2级** | `file:application.yml`             | 次高     | 位于**项目当前目录**下。                     |
| **3级** | `classpath:config/application.yml` | 次低     | 位于**类路径**（如Jar包内）的 `config`文件夹中。   |
| **4级** | `classpath:application.yml`        | **最低** | 位于**类路径**的根目录下。这是最常见的放置位置。         |

**优先级规则**：`1级 > 2级 > 3级 > 4级`。即，Spring Boot 会从1级开始查找，如果找到就加载，其属性会覆盖后面层级中的同名属性；如果没找到，则继续查找2级，以此类推。

---

### 二、 各级配置文件的作用与适用场景

图片中明确指出了不同层级配置文件的用途分工，这是 Spring Boot 设计哲学中“约定大于配置”的体现，便于不同角色协作。

#### **1级与2级：用于运维部署（打包后）**

- **路径**：在**已打包的Jar文件所在目录**或其下的 `config`目录。
    
- **核心价值**：**无需重新打包和编译项目**，即可修改应用配置。
    
- **典型使用者**：**运维经理**。
    
    - 例如，项目从测试环境部署到生产环境，数据库地址、密码、日志级别等都需要变更。运维人员只需在Jar包旁放置一个 `application-prod.yml`文件，即可完成配置，极其灵活。
        
    

#### **3级与4级：用于系统开发（打包前）**

- **路径**：在项目的 `src/main/resources`目录下。
    
- **核心价值**：配置与代码一起管理，参与打包过程。
    
- **典型使用者**：**开发人员、项目经理**。
    
    - **4级**：开发人员存放通用配置的地方。
        
    - **3级**：项目经理或架构师可用于放置一些团队共享的、相对固定的基础配置。
        
    

---

### 三、 核心问题解答：不同格式配置文件的共存效果

图片底部的“思考”模块提出了一个关键问题：**当不同层级的配置文件中，出现了不同格式（如 .yml 和 .properties）共存的情况，会是什么效果？**

#### 答案：层级优先级高于格式优先级。

**规则解读**：

1. **首先比较层级**：Spring Boot 首先根据**配置文件的存放位置（层级）**来决定优先级。
    
2. **其次比较格式**：**只有在同一层级下**，才会比较文件格式。在同一层级中，**`.properties`文件的优先级高于 `.yml`文件**。
    

#### 举例验证（回答图中的示例）：

> **问题**：类路径（classpath）下的 `application.properties`属性是否会覆盖文件系统（file）中 `config`目录下的 `application.yml`属性？

**答案：不会覆盖。**

**分析**：

- `file:config/application.yml`属于 **1级**配置。
    
- `classpath:application.properties`属于 **4级**配置。
    
- 根据优先级规则 **1级 > 4级**。
    
- 因此，无论文件格式如何，**1级配置的属性都会覆盖4级配置的同名属性**。
    

#### 更多场景举例：

- **场景1**：`file:application.properties`(2级) 和 `classpath:config/application.yml`(3级) 共存。
    
    - **结果**：2级配置的优先级更高，其属性会覆盖3级配置的同名属性。
        
    
- **场景2**：`classpath:config/application.properties`(3级) 和 `classpath:config/application.yml`(3级) 共存（**同一层级**）。
    
    - **结果**：因为在同一层级（3级），此时格式优先级生效。`.properties`的优先级高于 `.yml`，所以 `application.properties`中的属性会覆盖 `application.yml`中的同名属性。
        