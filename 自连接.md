# 自连接查询详解

## 核心语法

```
SELECT 字段列表 
FROM 表A 别名A 
[JOIN类型] 表A 别名B 
ON 连接条件;
```

## 关键要素说明

### 1. 必须使用表别名

- ​**原因**​：同一张表参与连接，需用别名区分不同实例
    
- ​**示例**​：`employees e1`和 `employees e2`代表表的两个逻辑副本
    

### 2. 连接类型支持

|连接类型|语法示例|用途|
|---|---|---|
|​**内连接**​|`INNER JOIN`|查询有对应关系的记录|
|​**左外连接**​|`LEFT JOIN`|包含左表全部记录|
|​**右外连接**​|`RIGHT JOIN`|包含右表全部记录|

## 实际应用场景

### 场景1：员工层级关系查询（查询每个员工及其经理）

```
SELECT 
    e1.name AS '员工姓名',
    e2.name AS '经理姓名'
FROM employees e1
LEFT JOIN employees e2 ON e1.manager_id = e2.id;
```

### 场景2：商品分类层级查询（父级-子级关系）

```
SELECT 
    c1.name AS '子分类',
    c2.name AS '父分类'
FROM categories c1
INNER JOIN categories c2 ON c1.parent_id = c2.id;
```

## 注意事项

1. ​**性能优化**​：对连接条件字段建立索引
    
2. ​**数据量控制**​：自连接可能产生大量临时数据
    
3. ​**逻辑清晰**​：确保连接条件准确，避免循环引用