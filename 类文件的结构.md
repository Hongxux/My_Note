![[Pasted image 20251208135932.png]]
- 类文件（.class文件）是Java源代码编译后生成的二进制中间格式，它包含了Java虚拟机执行程序所需的全部信息。


- 魔数
	- 位置：class文件的头四个字节
	- 大小：4个字节是魔数
	- 固定值：`0xCAFEBABE`。
	- 作用：JVM通过这个魔数来快速识别该文件是否为一个合法的Class文件。
- 版本信息：
	- 位置：紧接着魔数的4个字节
	- 大小：4个字节，
	- 值：
		- 前2个字节是次版本号
		- 后2个字节是主版本号。
	- 作用：JVM会检查版本号以确保其能够加载当前文件，高版本的JVM可以向下兼容低版本的Class文件，但反之则不行。

- 常量池：是Class文件中内容最丰富的区域，可以比作是一个资源仓库，用于通过索引值被索引
	- 内容：它主要存放两大类常量
		- 字面量：包括文本字符串（utf8）、被声明为final的常量值等![[Pasted image 20251208141448.png]]
		- 符号引用：类和接口的全限定名、字段的名称和描述符、方法的名称和描述符![[Pasted image 20251208141359.png]]![[Pasted image 20251208141436.png]]
	- 结构：常量池中的每一项常量都有一个特定的结构，并以一个u1类型的tag标签来标识其类型。

- 访问标志
	- 位置：在常量池之后
	- 大小：2个字节
	- 值：
		- 访问标志用于标识类或接口的访问信息：例如是类还是接口，是否为public，是否是abstract类型等。
- 类索引结构
	- 内容：
		- 包括当前类的索引
		- 父类的索引
		- 接口的索引集合
	- 索引值：指向常量池中CONSTANT_Class_info常量的引用，从而确定了这个类的继承关系和实现接口。

- 字段表与方法表
	- 字段表
		- 作用：描述类中声明的变量，不包括方法内部声明的局部变量
			- 实例变量
			- 类变量，
		- 每个字段的信息：
			- 访问标志（如public、private）
			- 名称
			- 描述符（数据类型）
			- 可能的属性。
	- 方法表
		- 结构：与字段表相似
			- 用于描述类中声明的方法。
			- 真正的方法实现代码（字节码指令）并不直接放在方法表中，而是存放在方法属性表集合中一个名为“Code”的属性里。
		- 每个方法的信息：
			- 访问标志（如public、synchronized）
			- 名称
			- 描述符（参数列表和返回值类型）
			- 重要的属性集合。

- 属性表集合
	- 作用：属性表是Class文件中最具扩展性的部分，在Class文件本身、字段表、方法表中都可以携带自己的属性表集合，用于描述某些专有信息。
	- 内容：
		- “Code”属性：![[Pasted image 20251208144604.png]]
			- 存放方法体内代码字节码
			-  “LineNumberTable”属性用于建立字节码指令偏移量与源代码行号之间的对应关系，这在调试时非常重要；
			- “LocalVariableTable”属性则用于描述方法中局部变量的信息。

		- “SourceFile”属性用于记录生成该Class文件的源代码文件名；
