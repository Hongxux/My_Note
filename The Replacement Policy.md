### **1. 核心定义、定位与关系**
#### **什么是页面置换策略？​**​

- ​**核心定义**​：当发生 **[[缺页中断（Page Fault）]]** ，需要将一个新页面从磁盘调入物理内存，但物理内存已无空闲空间时，操作系统必须**选择一个当前在内存中的页面（称为“牺牲页”）将其移出**，以便为新页面腾出空间。决定选择哪个页面被换出的规则，就是页面置换策略。
    
- ​**定位**​：它是虚拟内存管理的核心组件，直接决定了**主要缺页**的处理效率，对系统整体性能有巨大影响。
    
- ​**与缓存管理的关系**​：
    
    - ​**通用性原则**​：页面置换是**缓存管理**的一个特例。在计算机科学中，​**缓存**是位于快速设备与慢速设备之间的一个高速缓冲区，其目的是减少对慢速设备的访问。
        
    - ​**将主内存视为缓存**​：在虚拟内存系统中，​**物理内存（RAM）​**​ 可以被视为**磁盘**中数据的**缓存**。磁盘上存储着所有虚拟页的完整集合，而物理内存只缓存了其中活跃的一部分。
        
    - ​**目标一致**​：因此，页面置换策略的目标与所有缓存管理策略的目标完全一致：​**最大化缓存命中率**，即让请求的数据尽可能在高速设备（内存）中找到，从而最小化对低速设备（磁盘）的访问。
        
    
    ​**总结**​：页面置换策略是应用于“物理内存-磁盘”这级缓存结构的特定缓存替换算法。
    
    ---

### ​**2. 工作原理与具体算法**

#### AMAT 衡量指标
衡量一个置换算法好坏的关键指标是**缺页率**。缺页率越低，性能越好。
接着我们引入[[AMAT]]（**平均内存访问时间**），它由快速的**内存访问时间**​ 和慢速的**磁盘访问时间**​ 根据它们的发生概率（**命中率**​ 和 ​**未命中率**）加权平均得出。由于磁盘访问比内存访问慢数个数量级，​**即使是很低的未命中率也会对平均性能造成灾难性影响**。因此，操作系统内存管理的所有优化（如好的页面置换算法、工作集模型、预取等）都围绕着 ​**最大化命中率**​ 这一核心目标展开。
**AMAT = (Hit% ⋅ T_M) + (Miss% ⋅ T_D)​**

![[Pasted image 20251003150000.png]]
#### 1.最优置换算法
- ​**思想**​：置换在**最远的将来**才会被访问的页面。
    
- ​**实现**​：这需要预知未来，在实际系统中**无法实现**。
    
- ​**作用**​：作为一个**理论基准**。在研究和评估其他算法时，我们可以通过模拟一个访问序列，计算出OPT的缺页率，然后用其他算法的缺页率与之比较，从而判断其他算法的优劣。
#### 2.FIFO算法
- **思想**​：选择在内存中**驻留时间最长**的页面进行置换。
    
- ​**实现**​：操作系统维护一个链表，记录所有当前在内存中的页面。当页面调入内存时，将其加入链表尾部；需要置换时，移除链表头部的页面。
    
- ​**优点**​：实现非常简单。
    
- ​**缺点**​：性能往往很差，因为它忽略了的访问模式。一个早期被加载但非常活跃的页面（如标准库代码）可能会被不合理地换出。
    
- ​**Belady异常**​：FIFO算法的一个著名缺陷是，在某些情况下，​**分配更多的物理页帧给进程，反而可能导致缺页率升高**。这与缓存管理的直觉相悖。
#### 3.随机置换算法
- ​**思想**​：随机选择一个页面进行置换。
    
- ​**实现**​：通过硬件或软件随机数生成器选择一个页帧。
    
- ​**优点**​：实现极其简单，几乎没有开销。
    
- ​**缺点**​：性能不可预测，完全取决于运气。可能换出最重要的页面，也可能换出最不重要的页面。
    
- ​**使用场景**​：主要用于作为其他算法的对比基线，或在极端情况下（如无法承受跟踪访问记录的开销）使用。
#### 4.​[[LRU算法及其近似实现]]

### 3.潜在的问题
- ​**抖动**​：当所有算法都无法有效工作，即进程的工作集大于分配的物理页帧时，会发生频繁的页面换入换出，导致系统性能急剧下降。
    
- ​**开销权衡**​：需要在算法复杂度和带来的性能提升之间做权衡。FIFO开销最小但性能差，精确LRU性能好但开销大，Clock是优秀的折中。