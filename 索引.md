- 需求背景：查询性能瓶颈，没有索引将要全表扫描
- 解决措施：索引，“空间换时间”​ 的优化策略
	- 过滤性：将数据检索的时间复杂度从O(n)降低到O(log n)甚至更低
		- 显著减少磁盘I/O操作：
			- 重要性：磁盘I/O是数据库操作中最耗时的部分。
			- 原因：索引通过减少需要读取的数据页数量，有效降低了磁盘I/O次数，从而提升了系统吞吐量。
		- 加速表连接：在多表关联查询（JOIN）时，如果连接条件字段上有索引，数据库可以高效地找到关联表中的匹配记录，极大提升连接效率
	- 有序性：
		- 优化排序和分组操作：如果`ORDER BY`或`GROUP BY`子句可以用到索引，数据库可以直接按索引的顺序读取数据，避免昂贵的临时表排序和文件排序（Using filesort），从而提升性能。
	- 约束性：
		- 确保数据完整性：唯一索引​和主键索引可以确保表中列值的唯一性，是实施数据完整性约束的关键工具。
- 索引核心规则：
	1. 覆盖索引：查询列包含在索引中，全部包含在索引中，无需回表
- 代价：
	- **占用额外存储空间**：索引是独立的数据结构，需要占用额外的磁盘空间。通常，索引空间可能达到原表数据的20%-30%
	- **增加写操作开销**：当执行`INSERT`、`UPDATE`、`DELETE`操作时，数据库不仅需要修改表数据，还需要更新所有相关的索引，这会**降低写操作的速度**
	- **维护成本**：索引需要定期监控和维护，例如重建索引以消除碎片，或者删除不再使用或低效的索引
		- [[索引碎片]]

---
**基础索引类型：**
### 1. InnoDB 引擎（MySQL 默认，事务安全型引擎）

InnoDB 是目前 MySQL 最主流的引擎，支持多种索引类型，底层核心以 B+Tree 为主，具体如下：

|索引类型|底层数据结构|核心特点 & 适用场景|
|---|---|---|
|聚簇索引（主键索引）|B+Tree|1. 叶子节点直接存储**完整数据行**（数据与索引物理绑定），非叶子节点存主键值 + 页指针；<br><br>2. 每张表仅能有 1 个聚簇索引（默认主键，无主键则选唯一非空索引，否则自动生成隐藏主键）；<br><br>3. 适配等值查询、范围查询，查询效率极高。|
|二级索引（非主键索引）|B+Tree|1. 包括普通索引、联合索引、唯一索引（非主键）、前缀索引等；<br><br>2. 叶子节点存储**二级索引键值 + 主键值**（非物理地址），查询需 “回表”（通过主键查聚簇索引）；<br><br>3. 适配各类非主键字段的查询场景。|
|自适应哈希索引|哈希表（Hash Table）|1. **自动创建、无需手动配置**：InnoDB 会对高频访问的索引页（聚簇 / 二级索引）自动构建哈希索引；<br><br>2. 仅支持等值查询（如 `id=100`），不支持范围查询；<br><br>3. 基于内存实现，重启后失效，用于优化高频热点查询。|
|全文索引|倒排索引（Inverted Index）|1. 支持对文本字段（CHAR/VARCHAR/TEXT）的关键词检索，MySQL 5.6 及以上版本支持；<br><br>2. 底层通过 “词项 - 文档 ID” 映射实现快速全文匹配，适配文章检索、关键词查询场景。|
|空间索引|R 树（R-Tree）|1. 支持空间数据类型（如 GEOMETRY、POINT、POLYGON 等）；<br><br>2. 适配空间范围查询（如 “查询某区域内的所有坐标点”），不支持普通等值 / 范围查询。|

### 2. MyISAM 引擎（非事务安全型，已逐步被淘汰）

MyISAM **不支持事务和行锁**，索引结构与 InnoDB 差异较大，核心索引类型如下：

|索引类型|底层数据结构|核心特点 & 适用场景|
|---|---|---|
|主键索引|B+Tree|1. 无聚簇索引概念，叶子节点存储**数据行的物理地址**（文件偏移量，而非完整数据）；<br><br>2. 主键仅用于唯一标识数据，与数据物理存储无绑定关系。|
|二级索引（普通 / 唯一 / 联合）|B+Tree|1. 结构与主键索引完全一致，叶子节点均存储数据行物理地址；<br><br>2. 无需回表（直接通过物理地址定位数据），但查询性能略低于 InnoDB 聚簇索引（无事务开销换区的临时优势，已无实用价值）。|
|全文索引|倒排索引（Inverted Index）|1. 最早支持全文索引的 MySQL 引擎，功能与 InnoDB 全文索引一致；<br><br>2. 仅支持英文分词（按空格 / 标点分割），对中文支持极差（需依赖第三方插件）。|
|备注|不支持自适应哈希索引、空间索引|因不支持事务、崩溃恢复能力弱，仅用于历史遗留项目或只读场景。|

### 3. MySQL 其他小众引擎

- **Memory 引擎（Heap 引擎）**：数据存储在内存中，支持 **哈希索引（默认）** 和 **B+Tree 索引**；哈希索引适配等值查询，B+Tree 索引适配范围查询，重启后数据全部丢失，仅用于临时缓存场景。
- **Archive 引擎**：仅支持插入和查询，不支持更新 / 删除，无显式索引（仅内置一个自增 ID 索引，B+Tree 结构），底层采用压缩存储，适配日志归档等只读、海量插入场景。

---
### [[索引基础语法]]
### [[索引创建原则]]
### [[查询中正确使用索引]]

### [[SQL性能分析工具]]

