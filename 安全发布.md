### 安全发布的定义
- **安全发布**的定义：是指确保一个正确构造的对象在发布给其他线程时，其引用和状态对其他线程**同时可见**的机制。
	- **核心要求**
		- **引用可见性**​：对象的引用对其他线程[[立即可见]]
			
		- ​**状态可见性**​：对象的所有字段状态对其他线程[[立即可见]]
			
		- ​**完整性保证**​：避免看到部分构造的对象状态
    - ​**未被正确发布（Improper Publication）​**​：指对象在多线程环境中被共享时，没有使用足够的同步机制（如synchronized或volatile）来确保其他线程能看到对象的最终状态。这可能导致线程看到对象处于不一致或过时的状态。
		- 示例：在Holder类中，如果发布时不使用同步，其他线程调用assertSanity方法时可能看到null或旧值，从而抛出AssertionError。
	- **初始化安全性（Initialization Safety）​**​：指对象在构造过程中，其状态能被正确初始化和可见于其他线程的特性。如果初始化不安全，线程可能看到对象在构造完成前的中间状态。
		- 示例：不可变对象（如final域）在Java中享有初始化安全性，因为JVM能保证构造完成后状态对所有线程可见。
---
###  [[安全发布的方式]]


---
### 对象发布需求总结

| ​**对象类型**​ | ​**发布方式**​      | ​**访问要求**​ |
| ---------- | --------------- | ---------- |
| 不可变对象      | 任意机制            | 无需同步       |
| 事实不可变对象    | 安全发布            | 无需同步       |
| 可变对象       | 安全发布 + 线程安全/锁保护 | 每次访问需同步    |
**事实不可变对象**​：技术上可变，但发布后状态不再改变的对象。