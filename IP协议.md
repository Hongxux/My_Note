#图解HTTP 
[[网络通信协议：规则体系与分层架构#^126581|TCP、IP和DNS找协议分层中定位]]

![[Pasted image 20250914154323.png]]

# IP
## 一、区分IP协议和IP地址
- 
    ​**IP协议 = 规则手册**​（定义“如何送包裹”）
- 
    ​**IP地址 = 收货地址**​（标明“送到哪里去”）
    
两者协同实现跨网络通信，构成互联网的基石。

## 二、IP协议的核心功能
### 1. 寻址 (Addressing)

IP协议为互联网上的每一个网络设备（主机、路由器等）分配一个唯一的逻辑地址，即**IP地址**。

- ​**作用**​：这就像是设备的“家庭住址”，确保了数据包能够被准确地发送到目标设备，同时也标识了发送数据的源设备。
    
- ​**实现**​：目前广泛使用的是IPv4（如 `192.168.1.1`）和正在逐步推广的IPv6（如 `2001:0db8::ff00:0042:8329`）两套编址方案。IP地址不仅标识了单个主机，还通过**子网掩码**和**路由聚合**隐含了网络拓扑位置信息，这是路由功能的基础。
    

### 2. 路由 (Routing)

IP协议定义了数据包如何从源主机穿越复杂的网络拓扑到达目标主机的过程，这个过程就是  **[[路由表核心详解：route print命令解读与网络路径决策机制​|路由]]**。

- ​**作用**​：根据目标IP地址，为数据包选择一条最优的路径。IP协议本身不决定路径，路径是由网络中的**路由器**通过路由协议（如OSPF、BGP）动态计算和维护的。
    
- **实现**​：每个路由器内部都维护着一张**路由表**。当数据包到达路由器时，路由器会查看其目标IP地址，并查询路由表，决定将该数据包从哪个接口转发到下一个路由器（下一跳）。这样一跳一跳地转发，最终到达目的地。
    

### 3. 分片与重组 (Fragmentation & Reassembly)

不同的物理网络（如以太网、Wi-Fi）允许传输的数据帧最大长度（MTU）不同。IP协议需要解决大数据包在小MTU链路上传输的问题。

- ​**分片 (Fragmentation)​**​：当路由器需要将一个大的IP数据包转发到一个MTU较小的链路时，它会将这个大数据包**分割成多个更小的片段（Fragment）​**。每个片段都是一个独立的IP数据包，拥有自己的IP头（其中包含分片信息），并被单独转发。
    
- ​**重组 (Reassembly)​**​：这些分片后的数据包到达最终目标主机后，由**目标主机的IP层**根据分片信息（标识、偏移量、标志位）将它们**重新组装**成原始的数据包，再上交给自己上层的传输协议（如TCP或UDP）。
## 三、IP地址和MAC地址的**协作关系：IP与MAC如何联动？​**​

数据从源设备到目标设备的传输需 **[[网络通信的双重坐标：IP与MAC地址的功能解析|双重寻址]]** ：

1. **网络层**​：IP地址确定目标设备所在的网络（如`203.0.113.5`）。
2. **链路层**​：通过ARP协议将IP地址解析为当前局域网的MAC地址，完成最终交付。
​**通信流程示例**​（以访问网站为例）：


- .用户输入域名 → DNS解析为IP地址（如142.250.189.206）  
- [[路由表核心详解：route print命令解读与网络路径决策机制​| 路由器根据IP地址选择跨网传输路径 ]]
-  数据到达目标网络后 → [[数据链路层核心：MAC帧头解析与ARP地址解析协议工作机制|ARP协议查询该IP对应的MAC地址]]
-  通过MAC地址将数据包准确送抵目标服务器网卡

- ​**IP地址**：​
    实现全球设备的互联互通（如访问谷歌服务器需其IP地址）。
    
- MAC地址**​：
    保障数据在本地网络精准投递（如家庭网络中手机与智能电视直连投屏）

## 四、核心特性：与TCP对比

理解IP协议，一定要记住它的两个基本特性，这与TCP形成鲜明对比：

1. ​**无连接 (Connectionless)​**​：
    
    IP在发送数据前**不预先建立连接**。每个数据包（称为数据报）都是独立发送的，它们可能经过不同的路径，到达的顺序也可能混乱。IP协议不关心这些，它只负责根据当前的路由信息将每个数据报尽力送出去。
    
2. 不可靠 (Unreliable)​**​：
    
    IP协议**不提供任何保证**。它不保证数据包一定能送达（可能丢失），不保证按顺序送达，也不保证数据不失真。它只是“尽最大努力交付”。可靠性保障（如丢包重传、顺序整理）是由上层协议（主要是**TCP**）来完成的。
## 五、IP + TCP 的分工协作​：

正是**IP**这种简单、专注（只管**寻址和路由**）的设计，使得网络层高效且具有极强的扩展性，奠定了互联网的基础。而为了获得可靠的通信，我们在IP之上使用**TCP协议**来弥补IP的不足，由**TCP**来负责**建立连接、保证可靠性、控制流量**等。两者各司其职，共同完成了互联网上的可靠数据传输。