在使用C语言的`printf`和`scanf`函数时，需要注意以下关键事项：

---

### ​**一、`printf`注意事项**​

1. ​**格式说明符匹配**​
    
    - `%d`→ `int`
        
    - `%f`→ `float`/`double`
        
    - `%c`→ `char`
        
    - `%s`→ 字符串（需以`\0`结尾）
        
    - `%lf`→ `double`（仅`scanf`需要，`printf`可直接用`%f`）
        
    - ​**错误示例**​：用`%d`输出`float`会得到乱码。
        
    
2. ​**输出格式控制**​
    
    - `%.2f`：保留2位小数
        
    - `%5d`：至少占5字符宽度（右对齐）
        
    - `%-5d`：左对齐
        
    - `%06d`：补零（如`00123`）
        
    
3. ​**转义字符**​
    
    - `\n`：换行
        
    - `\t`：制表符
        
    - `%%`：输出`%`本身
        
    
4. ​**安全性**​
    
    - 避免用户输入作为格式字符串（如`printf(user_input)`），可能导致格式化字符串漏洞。
        
    

---

### ​**二、`scanf`注意事项**​

1. ​**变量地址传递**​
    
    - 必须用`&`取地址（字符串数组除外）：
        
        ```
        int num;
        scanf("%d", &num);  // 正确
        scanf("%d", num);   // 错误！导致崩溃
        ```
        
    
2. ​**格式字符串简洁性**​
    
    - 避免在`scanf`中使用`\n`：
        
        ```
        scanf("%f\n", &x);  // 错误！需多输入一次
        scanf("%f", &x);    // 正确
        ```
        
    
3. ​**输入缓冲区问题**​
    
    - 混合输入时，`%c`可能读取残留的`\n`：
        
        ```
        scanf("%d", &a);     // 输入后按回车
        scanf("%c", &ch);    // ch会读到'\n'
        ```
        
        ​**解决方法**​：在`%c`前加空格：
        
        ```
        scanf(" %c", &ch);   // 空格跳过空白字符
        ```
        
    
4. ​**字符串输入**​
    
    - 用`%s`时需防止溢出：
        
        ```
        char str[10];
        scanf("%9s", str);   // 限制长度，留1位给'\0'
        ```
        
        更推荐用`fgets()`：
        
        ```
        fgets(str, sizeof(str), stdin);
        ```
        
    
5. ​**返回值检查**​
    
    - 始终检查返回值，确保输入成功：
        
        ```
        if (scanf("%d", &num) != 1) {
            printf("输入错误！");
        }
        ```
        
    

---

### ​**三、通用注意事项**​

1. ​**类型一致性**​
    
    - `float`变量在`scanf`中用`%f`，`double`用`%lf`；
        
    - 在`printf`中两者均可用`%f`（C99起`%lf`也合法）。
        
    
2. ​**避免常见错误**​
    
    - `printf`拼写错误（如`print`）
        
    - 忘记包含`<stdio.h>`
        
    - 格式字符串与参数数量不匹配
        
    

---

### ​**示例对比**​

```
// 错误示例
float x;
scanf("%f\n", x);      // 漏了&，且有多余\n
printf("Value: %d", x); // 用%d输出float

// 正确示例
float x;
if (scanf("%f", &x) == 1) {   // 检查返回值
    printf("Value: %.2f", x);  // 保留2位小数
}
```

---

### ​**最佳实践**​

1. 为`scanf`添加输入提示：
    
    ```
    printf("请输入半径: ");
    scanf("%f", &r);
    ```
    
2. 对关键输入使用循环重试：
    
    ```
    while (scanf("%d", &num) != 1) {
        printf("无效输入，请重试: ");
        while (getchar() != '\n'); // 清空缓冲区
    }
    ```
    

掌握这些要点可避免90%的I/O错误！