---
aliases:
  - 磁盘预读
---
- 需求背景：
	- CPU和内存的访问速度远远快于磁盘，因此磁盘I/O成为现代计算机系统的**主要性能瓶颈**
	- 机械硬盘的I/O操作包含两个耗时阶段：**数据定位**（移动磁头寻道和旋转盘片，典型耗时约8ms）和**数据传输**。对于大量小规模的随机I/O请求，磁盘99%以上的时间都花在定位上，有效吞吐量极低
- 优化思路：磁盘预读
	- 核心思想：预测数据需求，将多个小I/O请求**合并为少数大I/O请求**
		- 预测数据需求的根据：空间局部性，即接下来很可能会访问当前数据附近的数据
		- 将多个小I/O请求**合并为少数大I/O请求**的根据：机械硬盘的I/O操作中数据定位是最耗时的
	- 策略：在应用程序明确请求数据之前，**主动**从磁盘读取后续可能被访问的数据到**高速缓存**（如内存）中
	- 好处：减少应用程序的等待时间，提升I/O效率
- 工作模式：
	- 开启预读：
		- 触发条件：系统检测到**顺序读取**模式（例如，每次读取都紧挨着上一次读取的位置）
		- 采取策略：
			- 不仅会读取当前请求的数据，还会额外读取后续一定量的数据
			- 如果顺序读取持续进行，预读窗口会逐渐扩大，以更激进的方式预读更多数据
		- 目的：减少应用程序的等待时间，提升I/O效率
	- 减缓或终止预读：
		- 触发条件：检测到访问模式突然变为随机读取
		- 采取策略：缩小预读窗口或停止预读
		- 目的：避免资源浪费
