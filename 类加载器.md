- 设计需求：类加载器的主要职责是将Java类的字节码（.class文件）从磁盘、网络或其他来源加载到JVM内存中，并转换成一个`java.lang.Class`对象，作为该类型数据在方法区的访问入口
	- 实现类的懒加载（Lazy Loading）：
		- 含义：类并非在程序启动时全部加载，而是在“首次主动使用”时才被加载。
		- 作用：这显著减少了启动时的内存占用和加载时间
	- 确保安全与隔离：
		- 方式：[[双亲委派模型]]
		- 作用：核心Java类库（如`java.lang.*`）由最顶层的启动类加载器加载
			- 避免了用户自定义类随意替换核心类库，保证了Java平台的基础安全
	- 建立独立的命名空间：每个类加载器都拥有一个独立的命名空间。
		- 作用：对于任意一个类，都需要由**加载它的类加载器**和这个类的**全限定名**共同确立其在JVM中的唯一性。这意味着，即使是同一个.class文件，被两个不同的类加载器加载后，在JVM看来也是两个完全不同的类型
		    - 这使得在同一个JVM内运行不同版本的库成为可能（例如Tomcat为每个Web应用提供独立的类加载器）
- 类加载器的层次和分工
	- 启动类相关配置：替换核心类的加载路径
		- 替换成新路径：`java -XbootclasspathKnew bootclasspath>`
		- 后追加路径：`java -Xbootclasspath/a:<追加路径>`
		- 前最佳路径：`java -Xbootclasspath/p:<追加路径>`
- 工作流程：
	- **loadClass方法中基于双亲委派机制去确定进行类加载的加载器**
	- **findClass方法中找到并且读取字节码类文件**
	- **defineClass完成Klass对象和Class对象的封装和创建**


| 类加载器          | 实现语言  | 负责加载的路径                                                 | 说明                                                         |
| ------------- | ----- | ------------------------------------------------------- | ---------------------------------------------------------- |
| **启动类加载器**​   | C/C++ | **`$JAVA_HOME/jre/lib/rt.jar`等核心库**                     | 最根基的加载器，不是`java.lang.ClassLoader`的子类，故在Java代码中获取其引用为`null` |
| **扩展类加载器**​   | Java  | **`$JAVA_HOME/jre/lib/ext`目录**或`java.ext.dirs`系统变量指定的路径 | 父加载器是启动类加载器。用于加载Java的扩展库。                                  |
| **应用程序类加载器**​ | Java  | **环境变量`classpath`或系统属性`java.class.path`指定路径下的所有类库**     | 也称为**系统类加载器**，是用户程序的默认类加载器。父加载器是扩展类加载器。                    |
| [[自定义类加载器]]   | JAVA  | 自己定义                                                    |                                                            |
- [[线程上下文类加载器]]
- 获取类加载器：
	```
	// 获取当前类的类加载器（通常是Application ClassLoader）
	ClassLoader classLoader = this.getClass().getClassLoader();
	
	// 获取系统类加载器（默认也是Application ClassLoader）
	ClassLoader systemClassLoader = ClassLoader.getSystemClassLoader();
	
	// 获取线程上下文类加载器
	ClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();
	
	// 尝试获取String类的加载器（由Bootstrap加载，返回null）
	ClassLoader stringClassLoader = String.class.getClassLoader(); // 返回 null
	```
