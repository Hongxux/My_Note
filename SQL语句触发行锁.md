
### 1. 自动加锁（`INSERT``UPDATE``DELETE`操作）

以下语句会在涉及的数据行上**自动**添加**排他锁（X锁）​**​：

- ​**`INSERT`**、**`UPDATE`**、**`DELETE`**​
    
- ​**机制**​：这些写操作在执行时，InnoDB 会自动为要修改的行加上 X 锁，直到事务结束（提交或回滚）才释放。这是为了保证数据修改的原子性和一致性。
    

### 2. 手动加锁（读操作）

普通的 `SELECT`语句是**快照读**，不加任何锁（基于 MVCC 机制）。但可以通过特定语法**手动**加锁，实现“当前读”或“悲观锁”：

- ​**`SELECT ... LOCK IN SHARE MODE`**​
    
    - ​**加的锁**​：​**共享锁（S锁）​**​
        
    - ​**场景**​：用于确保在事务执行过程中，读取的数据行**不被其他事务修改**，但允许其他事务并发读取。常用于需要确保数据在后续逻辑中保持不变的场景。
        
    
- ​**`SELECT ... FOR UPDATE`**​
    
    - ​**加的锁**​：​**排他锁（X锁）​**​
        
    - ​**场景**​：用于锁定读取的数据行，​**阻止其他事务读取（加S锁）或修改（加X锁）​**这些行。常用于实现“先查后改”的悲观锁逻辑，如库存扣减、防止重复提交等。
        
    

### 3. 不加锁

- ​**普通的 `SELECT`语句**​：在 ​**读已提交（Read Committed）​**​ 和 ​**可重复读（Repeatable Read）​**​ 隔离级别下，使用**多版本并发控制（MVCC）​**​ 机制读取数据快照，​**不施加任何行锁**，因此可以实现最高的读取并发性能。