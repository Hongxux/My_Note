

|参数名（英文全称）|是否必选|核心含义与作用|常见推荐值或示例|
|---|---|---|---|
|**`iss`(Issuer)**|可选|**签发者**：标识签发此JWT的实体（如认证服务器）。用于验证令牌来源。|通常是服务器的URL或唯一服务名，如 `"iss": "https://auth.myapp.com"`。|
|**`sub`(Subject)**|可选|**主题**：标识JWT的主体，即此令牌是为谁颁发的（如用户ID）。|应使用能唯一标识用户的字符串，如用户ID：`"sub": "user12345"`。|
|**`aud`(Audience)**|可选|**受众**：标识JWT的预期接收者（即哪些服务应该接受此令牌）。|可以是服务名或URL列表。若只有一个，可为字符串，如 `"aud": "api-gateway"`。|
|**`exp`(Expiration Time)**|**强烈建议必选**|**过期时间**：指定JWT的绝对失效时间戳（Unix时间）。**这是安全性的关键**。|应设置一个较短的时间（如2小时）。示例：`"exp": 1717808400`。|
|**`nbf`(Not Before)**|可选|**生效时间**：指定JWT在什么时间之前是无效的。|适用于令牌需要延迟生效的场景 。|
|**`iat`(Issued At)**|可选|**签发时间**：指定JWT的签发时间戳（Unix时间）。|可用于计算令牌已使用了多久。示例：`"iat": 1717801200`。|
|**`jti`(JWT ID)**|可选|**JWT唯一标识**：为JWT提供一个唯一标识符，常用于防止重放攻击。|通常是随机生成的唯一字符串，如UUID：`"jti": "a1b2c3d4-e5f6-..."`。|

### 🔑 关键参数详解与设置建议

在表格的基础上，我们来深入探讨几个关键参数的安全实践。

- **核心安全参数：`exp`（过期时间）**
    
    这是**最重要的参数之一**。JWT一旦签发，在有效期内无法单方面使其失效。因此，必须设置一个合理的、相对较短的过期时间（`exp`），以降低令牌泄露后带来的风险 。
    
    - **Access Token（访问令牌）**：用于访问受保护资源，有效期应较短，通常建议在**15分钟到2小时**之间，具体取决于应用的安全级别 。
        
    - **Refresh Token（刷新令牌）**：用于获取新的Access Token，有效期可以较长（如几天或几周），但需要安全地存储在服务器端（如数据库中），并实现吊销机制。
        
    
- **验证参数：`iss`（签发者）、`aud`（受众）**
    
    虽然这些参数是可选的，但在生产环境中**强烈建议使用**它们进行验证 。
    
    - **作用**：它们提供了额外的安全层。服务端在验证JWT时，应检查`iss`是否是自己信任的签发者，`aud`是否包含自己（即当前服务）。这可以防止使用来自不可信来源或目标非本服务的令牌进行攻击 。
        
    - **示例**：你的API服务器在验证令牌时，可以确认 `"iss": "auth.your-company.com"`且 `"aud": "api.your-company.com"`才予以放行。
        
    
- **防重放攻击参数：`jti`（JWT ID）**
    
    这是一个高级安全特性。通过为每个令牌分配唯一标识符（`jti`），并在服务端维护一个已使用过的`jti`缓存（或“黑名单”），可以确保同一个JWT不会被重复使用，有效防范重放攻击 。虽然这会让服务变得“有状态”，但在对安全性要求极高的场景下是值得的。
    

### ⚙️ 算法与密钥配置

JWT的安全性极大程度上依赖于签名算法和密钥。

- **算法（Algorithm）**
    
    在JWT的Header部分，`alg`参数声明了签名算法。常见的有：
    
    - **HS256（HMAC-SHA256）**：对称加密算法，使用同一个密钥进行签名和验证。**优点**是计算速度快。**缺点**是密钥需要在签发方和验证方之间安全共享，一旦验证方密钥泄露，整个系统安全崩溃。适用于单一应用或受信任的封闭环境 。
        
    - **RS256（RSA-SHA256）**：非对称加密算法，使用私钥签名，公钥验证。**优点**是验证方只需持有公钥，私钥可被安全地隔离在认证服务器上，更安全，特别适合微服务和分布式系统。**这是目前更推荐的算法**。
        
    
- **密钥（Secret Key）**
    
    - **强度**：密钥必须是**足够长且密码学安全的随机字符串**。对于HS256算法，密钥长度建议至少为256位（32字节）。
        
    - **管理**：**绝对禁止将密钥硬编码在源代码中**。应通过环境变量、配置服务器或专业的密钥管理服务（如HashiCorp Vault）来管理 。
        
    

### 🛡️ 核心安全实践总结

1. **必备参数**：务必设置**`exp`（过期时间）**。强烈建议设置并校验 **`iss`（签发者）和`aud`（受众）**。
    
2. **敏感信息**：**切勿在JWT的Payload中存放任何敏感信息**（如密码、银行卡号），因为Payload仅是Base64编码，并非加密，可以被轻易解码查看 。
    
3. **使用HTTPS**：始终通过HTTPS传输JWT，防止令牌在传输过程中被窃听或篡改 。
    
4. **安全存储**：在客户端，将JWT存储在`HttpOnly`的Cookie中可以有效降低被XSS攻击窃取的风险。避免存储在`localStorage`中。
    

希望这份详细的梳理能帮助你全面理解和正确配置JWT参数！如果你对特定场景（如微服务间的通信）下的JWT配置有进一步兴趣，我们可以继续探讨。