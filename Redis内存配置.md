- 需求背景:当Redis内存不足时，可能导致Key频繁被删除、响应时间变长、QPS不稳定等问题。
	- 当内存使用率达到90%以上时就需要我们警惕，并快速定位到内存占用的原因。
- Redis的内存划分![[Pasted image 20251126142042.png]]
	- 缓冲区内存：
		- 复制缓冲区:主从复制的repl backlog_buf
			- 如果太小可能导致频繁的全量复制，影响性能
			- 通过repl-backlog-size来设置，默认1mb
		- AOF缓冲区:AOF刷盘之前的缓存区域，AOF执行rewrite的缓冲区。
			- 无法设置容量上限
		- 客户端缓冲区:分为输入缓冲区和输出缓冲区
			- 输入缓冲区最大1G且不能设置
			- 输出缓冲区可以设置![[Pasted image 20251126142913.png]]
- 查看内存占用情况
	- `info memory`![[Pasted image 20251126141507.png]]
	- [[memory status]]![[Pasted image 20251126141610.png]]
- 