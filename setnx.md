[[setnx]]对应的是stringRedisTemplate.opsForValue().setIfAbsent()
	- **核心功能**：`setIfAbsent`方法的作用是**仅在 Redis 中指定的 key 不存在时，才设置该 key 的值**。如果 key 已存在，则不会进行任何操作。![[Pasted image 20251119135651.png]]
	- **底层对应**：它封装了 Redis 的 **`SETNX`**（SET if Not eXists）命令。
	- **原子性保证**：该操作是原子性的，这意味着“检查 key 是否存在”和“设置值”是两个连续但不可分割的步骤，从而避免了在高并发场景下的竞态条件（Race Condition）
	- 返回值含义
		- 返回 **`true`**：表示 key **之前不存在**，并且**成功设置**了值。
		- 返回 **`false`**：表示 key **已经存在**，本次**未执行设置**操作。
		- 返回 **`null`**：当在管道（pipeline）或事务（transaction）中使用时可能返回 null。
	- 主要应用场景
		1. **分布式锁**：这是最经典的用法。通过 `setIfAbsent`尝试设置一个代表锁的 key，返回 `true`表示获取锁成功，执行完临界区代码后需删除 key 释放锁。通常结合过期时间防止死锁。    
		2. **防重复提交/幂等性控制**：在接口调用或任务处理前，先尝试设置一个与请求唯一标识绑定的 key。如果设置失败（返回 `false`），说明该请求已被处理，从而避免重复操作。
		3. **缓存预热与初始化控制**：系统启动时，确保某些初始化操作（如加载配置、预热数据）只执行一次。