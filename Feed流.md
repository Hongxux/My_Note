
![[Pasted image 20251122132111.png]]
![[Pasted image 20251122132358.png]]![[Pasted image 20251122132404.png]]

![[Pasted image 20251122132417.png]]



![[Pasted image 20251122132422.png]]

### Timeline的三种实现模式
![[Pasted image 20251122132533.png]]
![[Pasted image 20251122133535.png]]

#### 读模式:读扩散
![[Pasted image 20251122132706.png]]
缺点是：每次读取的时候，都要从发件箱中拷贝副本，并且对其按照发布时间排序，延迟较高

#### 推模式：写扩散
![[Pasted image 20251122133131.png]]
缺点：直接在写的时候推送，导致其内存占用高
优点：读取的时候延迟低

#### 推拉模式
![[Pasted image 20251122133435.png]]
- 对于普通用户发布，粉丝数多
	- 对全部粉丝使用写扩散
- 对于大v，粉丝数多，把粉丝分层两类，
	- 对于普通粉丝使用读扩散
	- 对于活跃粉丝实现写扩散

