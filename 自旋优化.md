---
aliases:
  - 自旋
---
- 发生时机：获取轻量锁失败
- 含义：不放弃CPU（进入阻塞状态），而是进行一个忙循环（即“自旋”）反复检查锁是否已被释放
- 设计目的：避免了由线程阻塞和唤醒操作带来的上下文切换的消耗
- 缺点：空转带来CPU消耗
- 实现方式：自适应自旋，即由JVM根据运行时的实际情况动态决定自旋次数。
	- 核心权衡：权衡空转CPU消耗和上下文切换消耗
	- 具体规则：
		- 某个锁**最近自旋成功获得过**（说明持有时间短）：允许更长的自旋时间。
			- JVM会认为这次自旋成功的可能性也高，
		- 某个锁**很少自旋成功**：直接减少自旋次数，甚至跳过自旋
			- 避免无谓的CPU浪费。