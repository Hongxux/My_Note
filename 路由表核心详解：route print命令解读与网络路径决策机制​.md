### 一句话解释

​**路由表（Routing Table）​**​ 是网络设备（如路由器、电脑、服务器）内部的一个**数据表**，它存储了如何将数据包转发到其最终目的地的**路径指引规则**。它相当于网络的“道路地图”或“交通指示牌”。
![[Pasted image 20250916212444.png]]
[[IP协议#^40ec39|IP地址的表示]]：xxx.xxx.xxx.0和xxx.xxx.xxx.255代表什么
好的，我们来详细解读 Windows 系统下 `route print`命令的输出。这是一个非常实用的网络诊断技能。

以下是一个典型的 `route print`输出示例（部分核心内容）：

```
IPv4 Route Table
===========================================================================
Active Routes:
Network Destination        Netmask          Gateway       Interface  Metric
          0.0.0.0          0.0.0.0      192.168.1.1     192.168.1.100     25
        127.0.0.0        255.0.0.0         On-link         127.0.0.1    331
        127.0.0.1  255.255.255.255         On-link         127.0.0.1    331
  127.255.255.255  255.255.255.255         On-link         127.0.0.1    331
      192.168.1.0    255.255.255.0         On-link      192.168.1.100    281
    192.168.1.100  255.255.255.255         On-link      192.168.1.100    281
    192.168.1.255  255.255.255.255         On-link      192.168.1.100    281
        224.0.0.0        240.0.0.0         On-link         127.0.0.1    331
        224.0.0.0        240.0.0.0         On-link      192.168.1.100    281
  255.255.255.255  255.255.255.255         On-link         127.0.0.1    331
  255.255.255.255  255.255.255.255         On-link      192.168.1.100    281
===========================================================================
Persistent Routes:
  None
```

---

### 第一部分：表头含义

首先，我们理解每一列的含义：

- ​**Network Destination**: 目标网络地址。数据包想要去往的“目的地城市”。
    
- ​**Netmask**: 子网掩码。与目标网络结合，共同定义了一个地址范围，用来判断一个IP地址属于哪个“城市”或“街区”。
    
- ​**Gateway**: 网关（下一跳）。数据包为了到达目的地，​**必须首先发送到的下一个路由器**的IP地址。
    
    - ​**`On-link`**​ 是一个特殊值，意思是“**直接相连**”，无需经过其他路由器。目的地就在当前本地网络上，可以直接通话。
        
    
- ​**Interface**: 接口。​**本机**用于发送数据包的**本地IP地址**。它指定了数据包从哪个“门”出去。
    
- ​**Metric**: 度量值。到达目标网络的“成本”或“距离”（基于跳数、延迟、带宽等因素）。值越小，路径越优。当有多条路径可达同一目的地时，系统会选择 Metric 值最小的那条。
    

---

### 第二部分：逐条解读关键路由

现在，我们来解读最重要的几条记录：

#### 1. 默认路由 (The Default Route)

```
Network Destination Netmask    Gateway       Interface      Metric
      0.0.0.0        0.0.0.0   192.168.1.1   192.168.1.100    25
```

- ​**含义**​：这是**最重要**的一条路由。它是一条“兜底”规则。
    
- ​**解读**​：​**所有目标地址不认识的数据包**​（即不在下面任何一条更精确的路由规则中），统统发往网关 `192.168.1.1`（通常是你家或公司的路由器）。这条规则使得你的电脑能够访问互联网。
    

#### 2. 环回地址路由 (Loopback Routes)

```
127.0.0.0    255.0.0.0         On-link         127.0.0.1    331
127.0.0.1  255.255.255.255     On-link         127.0.0.1    331
```

- ​**含义**​：用于**本机内部通信**。发送到这些地址的数据包不会进入真实网络，而是直接由系统内部处理。
    
- ​**解读**​：当你访问 `127.0.0.1`或 `localhost`时，就是通过这些规则。它用于服务器软件测试或进程间通信。
    

#### 3. 本地网络路由 (Local Network Route)

```
192.168.1.0    255.255.255.0         On-link      192.168.1.100    281
```

- ​**含义**​：这条规则定义了你的**本地局域网（LAN）​**。
    
- ​**解读**​：所有发送到 `192.168.1.1`到 `192.168.1.254`之间地址的数据包（例如访问另一台电脑或网络打印机），都是**直接通信**​（`On-link`），不需要经过网关路由器。你的电脑会直接在本地网络上大喊：“谁是 `192.168.1.50`？”，而不是把包交给路由器。
    

#### 4. 本机地址路由 (Local Host Route)

```
192.168.1.100  255.255.255.255         On-link      192.168.1.100    281
```

- ​**含义**​：这条规则特指你**自己这台电脑**。
    
- ​**解读**​：发送到**本机精确IP地址**​ `192.168.1.100`的数据包，直接在本地处理。这是最精确的一条关于自己地址的路由。
    

#### 5. 广播路由 (Broadcast Routes)

```
192.168.1.255  255.255.255.255         On-link      192.168.1.100    281
```

- ​**含义**​：用于发送到**本地网络广播地址**的数据包。
    
- ​**解读**​：发送到 `192.168.1.255`的包会被局域网内的所有设备接收。同样，`255.255.255.255`是有限广播地址。
    

#### 6. 组播路由 (Multicast Routes)

```
224.0.0.0        240.0.0.0         On-link         127.0.0.1    331
224.0.0.0        240.0.0.0         On-link      192.168.1.100    281
```

- ​**含义**​：用于处理**组播**流量（一种“一对多”的通信方式，常用于视频流、游戏等）。
    
- ​**解读**​：目标地址在 `224.0.0.0`到 `239.255.255.255`之间的数据包，会通过环回接口和真实网络接口进行处理。
    

---

### 第三部分：路由决策流程总结

^d09690

当你的电脑（`192.168.1.100`）要发送一个数据包时，比如访问 `www.google.com`（IP 假设为 `142.251.42.206`），系统会按以下顺序查询路由表：

1. ​**精确匹配**​：有没有一条规则**精确匹配**​ `142.251.42.206`？没有。
    
2. ​**网络匹配**​：有没有一条规则匹配 `142.251.42.206`所在的**网络**​？`142.251.42.206`不属于 `127.0.0.0/8`，也不属于 `192.168.1.0/24`。没有匹配项。
    
3. ​**默认路由**​：最终，数据包匹配到**第一条规则**​ `0.0.0.0/0`（默认路由）。
    
4. ​**执行**​：根据这条规则，系统会将数据包发送到**网关**​ `192.168.1.1`，并通过**接口**​ `192.168.1.100`（即本机的网卡）发出。
    

​**如果访问的是同一局域网的另一台电脑 `192.168.1.50`**​：

它会匹配到规则 `192.168.1.0 255.255.255.0 On-link`。因为是 `On-link`，你的电脑会在本地网络上直接发送数据包，而不会麻烦路由器。

### 结论

`route print`输出了一张你的电脑用于连接整个世界（从本机到互联网）的**道路地图**。它清晰地展示了数据包离开你的机器时的所有可能路径。理解这张表，是诊断网络连接问题（如“为什么我能上QQ但不能打开网页？”）的关键第一步。