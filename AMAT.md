衡量一个置换算法好坏的关键指标是**缺页率**。缺页率越低，性能越好。
接着我们引入AMAT（**平均内存访问时间**），它由快速的**内存访问时间**​ 和慢速的**磁盘访问时间**​ 根据它们的发生概率（**命中率**​ 和 ​**未命中率**）加权平均得出。由于磁盘访问比内存访问慢数个数量级，​**即使是很低的未命中率也会对平均性能造成灾难性影响**。因此，操作系统内存管理的所有优化（如好的页面置换算法、工作集模型、预取等）都围绕着 ​**最大化命中率**​ 这一核心目标展开。
##### ​**公式分解**​

​**AMAT = (Hit% ⋅ T_M) + (Miss% ⋅ T_D)​**​

我们来拆解每个部分：

1. ​**Hit% （命中率）​**​：程序要访问的数据**正好在**物理内存（RAM）中的概率。
    
    - 这直接体现了页面置换算法等多重内存管理机制的有效性。​**命中率越高越好**。
        
    
2. ​**Miss% （未命中率 / 缺页率）​**​：程序要访问的数据**不在**物理内存中，必须从磁盘加载的概率。
    
    - `Miss% = 1 - Hit%`
        
    
3. ​**T_M （内存访问时间）​**​：访问物理内存（RAM）所需要的时间。这个时间非常短，通常是**纳秒级**​（例如 100 ns）。
    
4. ​**T_D （磁盘访问时间）​**​：从磁盘（硬盘或SSD）读取数据所需要的时间。这个时间非常长：
    
    - ​**机械硬盘（HDD）​**​：​**毫秒级**​（例如 10 ms = 10,000,000 ns）。这比内存访问慢约 ​**10万倍**。
        
    - ​**固态硬盘（SSD）​**​：​**微秒到毫秒级**​（例如 100 μs - 1 ms）。虽然比HDD快很多，但仍比内存慢 ​**100到1000倍**。
        
    

#### ​**核心思想与重要性**​

这个公式的核心思想是：​**AMAT 是内存访问时间（快）和磁盘访问时间（慢）的加权平均值，权重就是命中率和未命中率。​**​

​**它揭示了为什么我们要极力避免“主要缺页”（Major Page Fault）：​**​

- ​**高命中率的情况**​：如果 `Hit% = 99%`，`Miss% = 1%`，假设 `T_M = 100 ns`, `T_D = 10 ms`：
    
    - `AMAT = (0.99 * 100ns) + (0.01 * 10,000,000 ns)`
        
    - `= 99 ns + 100,000 ns ≈ 100,099 ns`
        
    - 虽然命中率高达99%，但平均访问时间仍然被1%的磁盘访问拖慢了约1000倍！
        
    
- ​**低命中率的情况（抖动）​**​：如果系统发生抖动，命中率急剧下降，假设 `Hit% = 80%`，`Miss% = 20%`：
    
    - `AMAT = (0.8 * 100ns) + (0.2 * 10,000,000 ns)`
        
    - `= 80 ns + 2,000,000 ns ≈ 2,000,080 ns`
        
    - 平均访问时间变得**极长**，系统性能彻底崩溃。
        

​