Redis 的通用命令是管理和操作所有数据类型键的基础。为了帮助你快速构建一个清晰的知识框架，下面这个表格汇总了这些核心命令及其主要用途。

|命令类别|命令示例|主要用途说明|
|---|---|---|
|**键管理**|`KEYS`, `DEL`, `EXISTS`, `TYPE`, `RENAME`|用于键的查询、删除、存在性判断、类型检查和重命名等日常管理。|
|**过期控制**|`EXPIRE`, `TTL`, `PERSIST`|为键设置生存时间（TTL）、查询剩余存活时间或移除过期设置。|
|**数据操作**|`COPY`, `MOVE`|在同一或不同数据库间复制或移动键。|
|**服务器工具**|`SELECT`, `FLUSHDB`, `FLUSHALL`, `INFO`|用于选择数据库、清空数据、查看服务器信息等系统级操作。|

接下来，我们详细了解一下这些命令的具体用法、示例场景和重要的注意事项。

### 🔑 键管理基础命令

这些命令用于对键本身进行日常操作。

- **`KEYS pattern`**
    
    - **功能**：查找所有匹配给定模式 `pattern`的键。支持 `?`(匹配一个字符)、`*`(匹配任意个字符)、`[abc]`(匹配括号内任一字符) 等通配符。
        
    - **示例**：
        
        ```
        127.0.0.1:6379> MSET firstname Jack lastname Stuntman age 35
        OK
        127.0.0.1:6379> KEYS *name*
        1) "lastname"
        2) "firstname"
        127.0.0.1:6379> KEYS a??
        3) "age"
        ```
        
    - **使用场景**：在开发或调试过程中，快速查看符合特定模式的键。例如，查找所有以 "user:" 开头的键。
        
    - **注意事项**：**`KEYS`命令在生产环境中需要极度谨慎使用**。因为它会遍历数据库中的所有键，当数据量巨大时，可能导致 Redis 服务短暂阻塞，影响其他请求的响应。推荐使用 `SCAN`命令进行非阻塞的迭代式查找。
        
    
- **`DEL key [key ...]`**
    
    - **功能**：删除一个或多个指定的键。
        
    - **示例**：
        
        ```
        127.0.0.1:6379> SET key1 "Hello"
        OK
        127.0.0.1:6379> SET key2 "World"
        OK
        127.0.0.1:6379> DEL key1 key2 key3
        (integer) 2  // 返回成功删除的键的数量，key3不存在，故删除2个
        ```
        
    - **使用场景**：清理不需要的缓存数据或删除指定的键。
        
    
- **`EXISTS key [key ...]`**
    
    - **功能**：判断一个或多个键是否存在。
        
    - **示例**：
        
        ```
        127.0.0.1:6379> SET key1 "Hello"
        OK
        127.0.0.1:6379> EXISTS key1
        (integer) 1  // 存在
        127.0.0.1:6379> EXISTS nosuchkey
        (integer) 0  // 不存在
        127.0.0.1:6379> EXISTS key1 key2 nosuchkey
        (integer) 2  // 传入3个key，其中2个存在
        ```
        
    - **使用场景**：在执行操作前检查键是否存在，以避免错误。
        
    
- **`TYPE key`**
    
    - **功能**：返回键所存储值的数据类型。
        
    - **示例**：
        
        ```
        127.0.0.1:6379> SET key1 "value"
        OK
        127.0.0.1:6379> LPUSH key2 "value"
        (integer) 1
        127.0.0.1:6379> TYPE key1
        "string"
        127.0.0.1:6379> TYPE key2
        "list"
        ```
        
    - **使用场景**：在不确定键的类型时进行检查，确保后续命令的正确执行。
        
    

### ⏳ 键过期控制命令

Redis 允许为键设置生存时间，到期后自动删除，这是实现缓存的核心机制。

- **`EXPIRE key seconds`**
    
    - **功能**：为键设置秒级的生存时间。
        
    - **示例**：
        
        ```
        127.0.0.1:6379> SET mykey "Hello"
        OK
        127.0.0.1:6379> EXPIRE mykey 10  // 10秒后过期
        (integer) 1
        127.0.0.1:6379> TTL mykey  // 查看剩余时间
        (integer) 10
        ```
        
    - **使用场景**：用户登录会话、手机验证码、临时数据等需要自动过期的场景。
        
    - **注意事项**：`EXPIRE`还有其他选项，如 `NX`（仅当键无过期时间时设置）、`XX`（仅当键已有过期时间时设置），提供更精确的控制。
        
    
- **`TTL key`**
    
    - **功能**：以秒为单位查看键的剩余生存时间。
        
    - **返回值**：
        
        - 大于 `0`：剩余的秒数。
            
        - `-1`：键存在但没有设置过期时间。
            
        - `-2`：键不存在。
            
        
    - **示例**：见上例。
        
    - **使用场景**：检查缓存何时失效。
        
    
- **`PERSIST key`**
    
    - **功能**：移除键的过期时间，使其成为永久有效的键。
        
    - **示例**：
        
        ```
        127.0.0.1:6379> EXPIRE age 300
        (integer) 1
        127.0.0.1:6379> TTL age
        (integer) 230
        127.0.0.1:6379> PERSIST age
        (integer) 1  // 成功移除
        127.0.0.1:6379> TTL age
        (integer) -1  // 表示永不过期
        ```
        
    - **使用场景**：当需要将原本有时效性的数据（如临时配置）转为永久数据时。
        
    

### 🔄 数据操作与服务器工具

这些命令帮助你在数据库间操作数据或管理 Redis 服务器。

- **`SELECT index`**
    
    - **功能**：切换到指定的数据库。Redis 默认提供 16 个数据库（索引 0-15）。
        
    - **示例**：
        
        ```
        127.0.0.1:6379> SELECT 1  // 切换到1号数据库
        OK
        127.0.0.1:6379> SELECT 16
        (error) ERR DB index is out of range
        ```
        
    - **注意事项**：在现代 Redis 使用和集群架构中，多数据库的功能并不被推荐，最佳实践是使用不同的 Redis 实例来隔离数据。
        
    
- **`FLUSHDB`/ `FLUSHALL`**
    
    - **功能**：`FLUSHDB`清空**当前数据库**的所有键。`FLUSHALL`清空 **所有数据库**的所有键。
        
    - **使用场景**：清理测试环境数据或进行灾难恢复。
        
    - **注意事项**：**这是极其危险的命令，在生产环境中必须极其谨慎，通常应禁止使用**，以免造成数据丢失。
        
    
- **`INFO [section]`**
    
    - **功能**：获取 Redis 服务器的各种信息和统计数值，如内存、CPU、复制状态等。
        
    - **示例**：`INFO memory`查看内存使用详情。
        
    - **使用场景**：监控服务器健康状况和性能排查。
        
    

### 💡 重要规范与最佳实践

为了更安全高效地使用 Redis，请牢记以下几点：

1. **避免阻塞命令**：除了 `KEYS`，类似 `HGETALL`、`SMEMBERS`、`LRANGE 0 -1`这种时间复杂度为 O(N) 的命令，在处理大集合时也可能阻塞服务器。应使用 `HSCAN`、`SSCAN`等命令分批遍历。
    
2. **控制键名和值大小**：键名应简洁明了（如使用 `业务:子业务:id`的命名规范），值不宜过大（建议超过 512KB 就要考虑压缩或拆分）。过大的 Value 会消耗大量内存和网络带宽。
    
3. **设置内存上限**：务必在配置中设置 `maxmemory`，并配置淘汰策略（如 `allkeys-lru`），防止内存耗尽。
    
4. **设置密码**：为 Redis 配置访问密码，防止未授权访问。
    

希望这份详细的指南能帮助你全面掌握 Redis 的通用命令。如果你对特定数据类型的命令（如 String, List, Hash）或高级功能（如事务、发布订阅）也感兴趣，我可以为你提供进一步的介绍。