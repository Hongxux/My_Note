---
aliases:
  - 临时属性
---


### 一、 临时属性设置：是什么与怎么用


#### 1. 什么是临时属性？

临时属性是指在**启动 Spring Boot 应用时**，通过命令行直接传入的属性。它**不需要预先写入配置文件**。

#### 2. 如何使用临时属性？
##### 生产环境（命令行）中使用

使用 `--`加属性名的方式，在 `java -jar`命令后附加。

**基本语法**：

```
java -jar your-application.jar --属性名=值
```

**示例**：

- **单个属性**（图1）：
    
    ```
    java -jar springboot.jar --server.port=80
    ```
    
    此命令会将内嵌服务器的端口临时改为80，覆盖 `application.properties`中的 `server.port`设置。
    
- **多个属性**（图1 & 图4）：多个属性之间用**空格**分隔。
    
    ```
    java -jar springboot.jar --server.port=80 --spring.datasource.password=newpassword
    ```
##### 开发环境中使用
---

###### 方式一：通过编程方式硬编码传入

这种方法是在应用程序的入口 `main`方法中，通过代码直接设置参数。

**代码示例**：

```
public static void main(String[] args) {
    // 打印原始参数（通常为空）
    System.out.println(Arrays.toString(args));

    // 1. 创建一个参数数组
    String[] arg = new String[1];
    // 2. 为数组元素赋值，模拟命令行参数
    arg[0] = "--server.port=8082"; // 设置服务器端口为8082

    // 3. 启动Spring Boot应用，并传入参数
    SpringApplication.run(SSMPApplication.class, arg);
}
```

**工作流程**：

1. 程序启动。
    
2. 在调用 `SpringApplication.run`之前，手动创建一个字符串数组 `arg`，并放入一个参数 `"--server.port=8082"`。
    
3. 将 `arg`数组传给 `run`方法。
    
4. Spring Boot 会解析这个数组，就像解析命令行参数一样，将 `server.port`设置为 8082。
    

**特点与用途**：

- **优点**：逻辑清晰，易于理解参数传递的原理。
    
- **缺点**：**不灵活**。需要修改源代码、重新编译打包才能改变参数。
    
- **实际用途**：主要用于**教学和演示**，帮助开发者理解 Spring Boot 参数传递的机制。在实际开发和生产中**极少使用**。
    

图3中的对比代码进一步说明，如果不需要参数，直接调用 `SpringApplication.run(SSMPApplication.class)`即可。

---

###### 方式二：在 IDE（集成开发环境）中设置（图2）

这是**开发阶段最常用、最便捷**的方式。直接在 IDE 的运行配置中设置参数，无需修改代码。

**操作路径（以 IntelliJ IDEA 为例）**：

1. 打开 `Run/Debug Configurations`。
    
2. 找到或创建你的 Spring Boot 应用启动配置。
    
3. 在 `Configuration`标签页下，找到 `Program arguments`输入框。
    
4. 在其中填入所需的参数，多个参数用空格分隔。
    

**示例**（对应图2）：

```
--server.port=80 --logging.level.root=warn
```

这行配置表示：

- 将应用端口设置为 `80`。
    
- 将根日志级别设置为 `WARN`（只输出警告和错误信息）。
    

**特点与用途**：

- **优点**：**极其方便**，修改后立即生效，无需重新打包，非常适合开发和调试。
    
- **缺点**：配置与特定的 IDE 环境绑定，无法直接用于生产部署。
    
- **实际用途**：**日常开发调试的首选方式**。
    


#### 3. 注意事项

- **属性必须有效**：临时属性必须是当前 Spring Boot 工程**支持的配置属性**（即官方文档中有定义的属性，或你自定义的属性），否则设置无效。
    
- **临时性**：这种设置方式**仅对当前这次启动生效**，不会修改任何配置文件。应用重启后，若不指定临时属性，则会使用配置文件中或默认的配置。
    

---

### 二、 属性加载的优先级：为什么临时属性会生效

图2和图3（内容基本一致）揭示了 Spring Boot 属性加载的**核心机制**，这也是临时属性能够覆盖配置文件属性的根本原因。

Spring Boot 会从多达 **14 种不同的来源**（Source）加载属性，并遵循一个**严格的优先级顺序**。

#### 1. 核心规则：**高优先级覆盖低优先级**

**如果一个属性在多个地方都被配置了，那么高优先级来源的属性值会覆盖低优先级来源的属性值。**

#### 2. 关键优先级解读（结合图表）

从图2和图3的列表（共14条）中，我们需要重点关注以下几点：

1. **`@PropertySource`注解**（优先级 2）：通过此注解导入的自定义属性文件。
    
2. **配置文件（Config data）**（优先级 3）：这是我们最熟悉的 `application.properties`或 `application.yml`文件中的配置。
    
3. **操作系统环境变量**（优先级 5）：在操作系统中设置的环境变量。
    
4. **Java 系统属性**（优先级 6）：通过 `-D`参数传递给 JVM 的系统属性，例如：
    
    ```
    java -Dserver.port=90 -jar springboot.jar
    ```
    
5. **命令行参数（Command line arguments）**（优先级 11）：这就是我们上面讲的**临时属性**，使用 `--`开头。
    

#### 3. 为什么临时属性优先级高？

从列表中可以看出，**命令行参数（优先级 11）的优先级远高于配置文件（优先级 3）**。

**举例说明**：

假设你的 `application.properties`中配置了：

```
server.port=8080
```

但你在启动命令中指定：

```
java -jar springboot.jar --server.port=80
```

**最终生效的结果**：`server.port`的值将是 **80**。因为命令行参数（优先级11）的级别高于配置文件（优先级3），所以命令行参数**覆盖**了配置文件中的值。

---

### 三、 总结与应用场景

这四张图连起来，完整地解释了 Spring Boot 强大而灵活的**外部化配置**能力。

1. **方法**：可以通过 `java -jar app.jar --属性名=值`的方式在启动时传入**临时属性**。
    
2. **原理**：这是因为 Spring Boot 有一个**属性加载优先级链**。**命令行参数**的优先级（11）高于**配置文件**（3），因此可以实现**覆盖**。
    
3. **价值**：
    
    - **灵活性**：无需修改打包好的 Jar 文件或配置文件，即可快速调整应用行为（如切换端口、连接不同的数据库），特别适用于**多环境部署**（开发、测试、生产）。
        
    - **安全性**：敏感信息（如数据库密码）可以不写在配置文件中，而是通过启动命令传入，更安全。
        
    - **应急处理**：生产环境出现问题时，可以快速通过临时属性修改日志级别等，进行在线调试。
        
    

**一句话总结**：**Spring Boot 的临时属性功能，基于其高优先级的属性加载机制，为应用配置提供了极致的灵活性和弹性，是“约定大于配置”和“外部化配置”理念的完美体现。**