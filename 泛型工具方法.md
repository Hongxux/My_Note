

#### ​**1. 泛型方法的优势**​

- ​**通用性设计**​：
    
    `Collection`和 `Iterator`接口是泛型的，支持编写操作任意集合的工具方法。
    
    ​**示例**​：检测集合是否包含指定元素的泛型方法
    
    ```
    public static <E> boolean contains(Collection<E> c, Object obj) {
        for (E element : c)
            if (element.equals(obj))
                return true;
        return false;
    }
    ```
    

#### ​**2. `Collection`接口的核心方法**​

Java集合库内置了以下常用方法（所有实现类必须提供）：

|方法签名|功能描述|
|---|---|
|`int size()`|返回集合元素数量|
|`boolean isEmpty()`|判断集合是否为空|
|`boolean contains(Object obj)`|判断集合是否包含指定对象|
|`boolean containsAll(Collection<?> c)`|判断集合是否包含另一集合的所有元素|
|`boolean add(E element)`|添加元素（成功返回 `true`）|
|`boolean addAll(Collection<? extends E> from)`|添加另一集合的所有元素（成功返回 `true`）|
|`boolean remove(Object obj)`|移除指定对象（成功返回 `true`）|
|`boolean removeAll(Collection<?> c)`|移除与另一集合共有的元素（成功返回 `true`）|
|`void clear()`|清空集合|
|`boolean retainAll(Collection<?> c)`|仅保留与另一集合共有的元素（成功返回 `true`）|
|`Object[] toArray()`|返回包含所有元素的数组|
|`<T> T[] toArray(IntFunction<T[]> generator)`  <br>（Java 11+）|通过生成器构造数组（如 `String[]::new`）|
|`default boolean removeIf(Predicate<? super E> filter)`  <br>（Java 8+）|移除满足条件的元素（如 `c.removeIf(e -> e.length() > 5)`）|

#### ​**3. 实现类的便捷支持：`AbstractCollection`**​

- ​**设计目的**​：
    
    减少实现类重复编写通用方法（如 `contains()`），仅需实现核心抽象方法：
    
    ```
    public abstract class AbstractCollection<E> implements Collection<E> {
        public abstract Iterator<E> iterator(); // 子类实现
        public abstract int size();             // 子类实现
    
        // 通用方法示例（基于迭代器实现）
        public boolean contains(Object obj) {
            for (E element : this)  // 调用 iterator()
                if (element.equals(obj))
                    return true;
            return false;
        }
    }
    ```
    
- ​**子类优化**​：
    
    子类可重写通用方法以提供更高效的实现（如 `HashSet`重写 `contains()`）。
    

#### ​**4. 默认方法的演进**​

- ​**历史局限**​：
    
    早期通过抽象类（如 `AbstractCollection`）提供通用实现，但非最优解。
    
- ​**现代改进**​：
    
    Java 8+ 在接口中引入默认方法（如 `removeIf()`），无需依赖抽象类。
    

---

### ​**关键接口 API 摘要**​

#### ​**`java.util.Collection<E>`**​

|方法|说明|
|---|---|
|`Iterator<E> iterator()`|返回遍历集合的迭代器|
|`default void forEach(Consumer<? super E> action)`|对每个元素执行操作（Java 8+）|

#### ​**`java.util.Iterator<E>`**​

|方法|说明|
|---|---|
|`boolean hasNext()`|检查是否存在下一个元素|
|`E next()`|返回下一个元素（无元素时抛出 `NoSuchElementException`）|
|`void remove()`|删除上次 `next()`返回的元素（未调用 `next()`时抛出 `IllegalStateException`）|
|`default void forEachRemaining(Consumer<? super E> action)`|遍历剩余元素并执行操作（Java 8+）|

---

### ​**设计思想总结**​

|主题|核心要点|
|---|---|
|​**泛化能力**​|通过泛型方法（如 `contains()`）实现对任意集合类型的操作。|
|​**接口设计**​|`Collection`接口定义完备的操作方法，平衡通用性与灵活性。|
|​**实现优化**​|`AbstractCollection`通过模板方法模式减少重复代码，子类可针对性优化。|
|​**演进方向**​|Java 8+ 默认方法（如 `removeIf()`）逐步取代抽象类的通用实现。|