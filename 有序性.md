
| 安全需求 | 通俗解释    | 典型 Bug 场景     | 对应硬件/编译器优化 |
| :--- | :------ | :------------ | :--------- |
| 有序性  | 代码顺序不能乱 | 对象“半初始化”就被别人用 | 指令重排       |
- 需求背景：标志完成，但实际上是半成品
	- 单例模式中对象初始化：其他线程可能获取到未完全初始化（但已分配内存）的对象，导致行为异常
		- 示例：DCL
	- 标志位已置位但数据尚未准备好
- 产生原因：编译器和处理器优化，单线程正常运行，线程间的执行存在依赖关系的多线程出现问题
	- 编译器指令重排：编译器在编译源代码时，可能会在不改变单线程语义的前提下，重新排列指令的执行顺序以优化性能
	- 处理器指令重排：CPU也可能会采用乱序执行技术，只要不影响单线程执行的最终结果，指令的执行顺序也可能被打乱
- 解决措施：遵守[[happens-before]]规则
