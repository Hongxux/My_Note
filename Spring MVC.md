### Spring MVC的价值
1. **入口控制（DispatcherServlet）**：提供了统一的请求分发中心，避免了为每个功能编写单独的 Servlet 并在 `web.xml`中注册的繁琐。
    
2. **表单数据绑定**：自动将请求参数封装为对象，是**最直观、最常用**的优化之一。
    ![[Pasted image 20251109100602.png]]
3. **IoC 容器**：自动管理 Controller、Service、Repository 等组件的生命周期和依赖关系，无需手动 `new`。
    
4. **统一处理机制**：通过**拦截器（Interceptor）** 实现横切关注点（如日志、权限），通过**异常处理器**统一管理异常，使业务代码更纯粹。
    
5. **视图解析**：支持多种视图技术（JSP, Thymeleaf等），并简化了页面跳转和数据传递。
###  Spring MVC的流程

| 组件                    | 角色             | 职责                           |
| --------------------- | -------------- | ---------------------------- |
| **DispatcherServlet** | **前端控制器/调度中心** | 统一的请求入口，负责协调所有组件，是流程的“总指挥”。  |
| **HandlerMapping**    | **路由映射器**      | 维护请求URL与控制器方法的映射关系，相当于“路由器”。 |
| **Controller**        | **请求处理器**      | 包含具体的业务逻辑，是开发者编写代码的主要地方。     |
| **ViewResolver**      | **视图解析器**      | 将控制器返回的逻辑视图名解析为具体的视图文件。      |
| **View**              | **视图**         | 负责渲染模型数据，生成最终的响应内容（如HTML）。   |

#### 步骤 1：发起请求

浏览器向URL `http://localhost:8080/springmvc/haha`发送请求。这是整个流程的起点。

#### 步骤 2：前端控制器接收请求（**核心入口**）

**DispatcherServlet**是 Spring MVC 的“大脑”或“调度中心”。它在 `web.xml`中被配置为拦截所有请求（如 `/*`）。所有请求都首先到达它，由它负责协调后续的所有工作。**这是前端控制器设计模式的体现**。

#### 步骤 3：映射到控制器（**路由匹配**）

**DispatcherServlet**接收到请求后，会查询一个名为 **HandlerMapping**的组件。这个组件维护了一张“路由表”，其作用是根据请求的路径（如 `/haha`），找到真正处理这个请求的**目标控制器**中的**特定方法**。

- 图中示例：将路径 `/haha`映射到 `FirstController`类中的 `名字随意()`方法。
    
![[Pasted image 20251109102024.png]]
#### 步骤 4：处理业务逻辑（**控制器工作**）

找到目标方法后，**DispatcherServlet**会调用它。在这个方法中，开发者会编写具体的业务逻辑，例如：

- 调用 `Service`层处理业务。
    
- 从数据库查询数据。
    
- 将数据放入模型（Model）中，以便在视图中显示。
    

#### 步骤 5：返回视图名称（**逻辑视图**）

控制器方法处理完毕后，会返回一个**字符串**，这个字符串代表一个**逻辑视图名**（例如 `"first"`）。它并不是一个真实的文件路径，而是一个别名。

#### 步骤 6：视图解析（**物理视图定位**）

**DispatcherServlet**拿到逻辑视图名（`"first"`）后，会交给 **ViewResolver（视图解析器）** 处理。视图解析器的工作是根据预先配置的规则，将**逻辑视图名**拼接成**真实的物理视图路径**。

- 图中示例：视图解析器将逻辑视图名 `first`与前缀（`/WEB-INF/templates/`）和后缀（`.html`）拼接，最终得到物理路径 `/WEB-INF/templates/first.html`。
    

#### 步骤 7：渲染与响应

**DispatcherServlet**拿到最终的视图文件后，会进行视图渲染（例如，Thymeleaf 或 JSP 模板会将数据填充到 HTML 中），生成最终的 HTML 内容，并将其作为 HTTP 响应返回给浏览器。


