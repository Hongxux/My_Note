- 需求背景：
	- 需要创建大量相同或相似对象实例的场景
	- 为每个实例都创建一个独立的对象会消耗大量的内存和系统资源，成为系统性能的瓶颈
- 核心思想：
	- 相同的字段（内部状态）：提取出来进行共享
		- 由享元对象在创建时保存和管理。
	- 不同的字段（外部状态）：需要的时候由外部提供
		- 由客户端程序在调用时传入享元对象。
- JDK中使用享元模式的体现：
	- 字符串常量池：JVM 在堆内存维护全局池，相同字面量的 `String`对象只存在一份
	- 包装类：通过静态内部类缓存特定范围（默认 -128 到 127）的包装类对象
	- 线程池：复用池中空闲的线程对象执行新任务，而非每次都创建新线程
- 示例：
	- 场景设计：假设我们有一个表示系统配置项 `ConfigItem`的不可变类。每个配置项有名称（name）​ 和值（value）​ 两个属性。其中，`name`是固定且有限的（如 `"timeout"`, `"retry.count"`），而 `value`会频繁变化。
		- 内部状态 ：配置项的 `name`。它是固有的、可共享的。对于同一个名称，全系统可以共享一个对象。
		- 外部状态 ：配置项的 `value`。它随上下文变化，不可共享，需要在调用时由外部传入。
	- 享元模式的实现
		- 定义享元接口（或抽象类）：接口中的方法需要接收外部状态作为参数。
			```
			public interface ConfigFlyweight {
			    // display 操作需要外部传入当前的值（外部状态）
			    void display(String currentValue);
			    // 可以定义其他需要外部状态的方法...
			}
			```
		- 具体享元类：保存内部状态（name），外部状态（value）由客户端通过接口体现的方法display传入
			```
			public final class ConcreteConfigFlyweight implements ConfigFlyweight {
			    // 内部状态
			    private final String name;
			    // 在构造时初始化内部状态
			    public ConcreteConfigFlyweight(String name) {
			        this.name = name;
			    }
			    @Override
			    public void display(String currentValue) {
			        // 外部状态 (Extrinsic State) 作为参数传入
			        System.out.println("Config Item: [Name=" + name + ", Value=" + currentValue + "]");
			    }
			    // 通常只需要提供内部状态的getter
			    public String getName() {
			        return name;
			    }
			}		  
			```
		- 享元工厂：工厂通过享元池管理和共享享元对象
			- ConcurrentHashMap：确保相同的内部状态对应同一个对象且线程安全
		```
		
		public class ConfigFlyweightFactory {
		    // 享元池：存储内部状态（name）到具体享元对象的映射
		    private static final Map<String, ConcreteConfigFlyweight> FLYWEIGHTS = new ConcurrentHashMap<>();
		
		    // 根据内部状态（name）获取享元对象
		    public static ConcreteConfigFlyweight getFlyweight(String name) {
		        // 如果不存在，则创建并放入池中；如果已存在，直接返回共享的对象。
		        return FLYWEIGHTS.computeIfAbsent(name, ConcreteConfigFlyweight::new);
		    }
		
		    // 辅助方法，查看当前池中有多少共享对象
		    public static int getPoolSize() {
		        return FLYWEIGHTS.size();
		    }
		}
		```
	- 使用享元
		1. 从享元工厂中获得享元对象
			- 不存在则创建
			- 存在则从享元池中取出来
		2. 使用享元对象，并且传递外部状态oV