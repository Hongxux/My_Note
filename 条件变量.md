---
aliases:
  - condition variables
---
- 设计目的：实现精确唤醒
- 数据结构：
	- 等待队列：
		-  当线程调用 `wait`操作时：
			1. 线程控制块（TCB）会被封装成一个“等待项”（wait entry），并添加到该条件变量对应的等待队列中。
			2. 线程状态被设置为睡眠
			3. 随后调用调度器切换线程
		- 当其他线程调用 `signal`或 `broadcast`时，
			1. 内核会遍历这个等待队列，找到需要唤醒的线程，
			2. 将其状态重置为可运行（TASK_RUNNING）
			3. 并放入调度器的就绪队列
- 等待和唤醒机制实现的基础：Futex

