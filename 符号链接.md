---
aliases:
  - 软连接
---
​

​**一、 符号链接的引入：解决硬链接的局限性**​

1. ​**硬链接的限制：​**​
    
    - ​**不能链接目录：​**​ 防止在目录树中创建循环引用。
        
    - ​**不能跨文件系统/分区：​**​ inode 号仅在特定文件系统内唯一，无法在不同文件系统间共享。
        
    - ​**只能指向已存在文件：​**​ 无法指向不存在的目标。
        
    
2. ​**符号链接的诞生：​**​ 为了解决上述限制，引入了符号链接（也称为软链接）。
    

​**二、 创建符号链接**​

1. ​**命令行工具 (`ln -s`):​**​
    
    - 使用 `ln`命令并添加 `-s`选项创建符号链接。
        
    - ​**语法：​**​ `ln -s <target> <link_name>`
        
    
2. ​**示例：​**​
    
    ```
    prompt> echo hello > file      # 创建目标文件 "file"
    prompt> ln -s file file2      # 创建指向 "file" 的符号链接 "file2"
    prompt> cat file2             # 通过符号链接访问目标文件内容
    hello
    ```
    

​**三、 符号链接的本质与特性**​

1. ​**独立的文件类型：​**​
    
    - 符号链接是文件系统中的**第三种基本类型**​（区别于普通文件和目录）。
        
    - ​`stat`输出 ​ `stat file2`会明确标识文件类型为 `symbolic link`。
        
    - `ls -al`输出：​ 长列表格式中，符号链接条目的**首字符为 `l`​**  (普通文件是 `-`，目录是 `d`)。同时显示链接指向的目标路径（如 `file2 -> file`）。
        
    
2. ​**内容存储：​**​
    
    - 符号链接文件本身存储的是**目标文件的路径名**​（字符串）。
        
    - ​**大小：​**​ 符号链接文件的大小等于其存储的**目标路径名字符串的长度**​（以字节为单位）。
        
        - 示例 1：指向 `file`(4字符) 的 `file2`大小为 4 字节。
            
        - 示例 2：指向 `alongerfilename`(15字符) 的 `file3`大小为 15 字节。
            
        
    
3. ​**解析机制：​**​
    
    - 当访问符号链接时（如 `cat file2`），操作系统会**读取链接文件的内容**​（即目标路径名），然后**解析该路径**去访问实际的目标文件。
        
    

​**四、 符号链接与硬链接的关键区别**​

|特性|硬链接 (Hard Link)|符号链接 (Symbolic Link / Soft Link)|
|---|---|---|
|​**本质**​|指向相同 inode 的额外目录项|存储目标路径名的特殊类型文件|
|​**文件类型**​|与目标文件相同 (普通文件或目录)|独立的文件类型 (`l`)|
|​**inode**​|共享目标文件的 inode|拥有自己独立的 inode|
|​**跨文件系统**​|​**不能**跨不同文件系统/分区|​**可以**跨不同文件系统/分区|
|​**链接目录**​|​**不能**创建指向目录的硬链接|​**可以**创建指向目录的符号链接|
|​**目标要求**​|目标文件必须存在|目标文件可以不存在（创建悬空引用）|
|​**引用计数**​|增加目标 inode 的链接计数 (`st_nlink`)|​**不影响**目标文件的链接计数|
|​**删除目标**​|删除一个硬链接名不影响其他链接或文件内容|删除目标文件会导致符号链接**悬空**​|
|​**大小**​|与目标文件相同|等于存储的目标路径名字符串长度|
|​**`ls -al`**​|显示为普通文件/目录|显示为 `l`，并显示 `->`指向的目标路径|

​**五、 悬空引用 (Dangling Reference)​**​

1. ​**定义：​**​ 符号链接指向的目标文件被删除或移动后，该符号链接即成为悬空引用。
    
2. ​**原因：​**​ 符号链接仅存储目标路径名，不维护目标文件的 inode 引用计数。
    
3. ​**表现：​**​ 尝试访问悬空的符号链接会导致错误（如 `No such file or directory`）。
    
4. ​**示例：​**​
    
    ```
    prompt> echo hello > file
    prompt> ln -s file file2    # 创建符号链接
    prompt> cat file2           # 访问成功
    hello
    prompt> rm file             # 删除目标文件
    prompt> cat file2           # 访问失败（悬空）
    cat: file2: No such file or directory
    ```
    
