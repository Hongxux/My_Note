---
aliases:
  - Balking
  - 退缩模式
---
- 含义：检查条件，不满足则立即放弃
	- 核心思想：快速放弃
- 设计目的：确保特定操作在只被执行一此，或者在特定状态下不执行
	- 避免重复操作
		- 含义：确保某些操作只被首次感知到的线程执行，避免多线程重复执行
		- 示例：比如重建缓存，首个感知到缓存过期的人执行重建缓存，其他后感知的线程不会重复重建一个缓存
			- 重复重建一个缓存会导致cpu和IO浪费
	- 提高程序响应速度
	- 资源状态管理：
		- 含义：当某个资源处于特定状态时，新的请求会被直接拒绝
		- 示例：connection正处于关闭状态，则发送请求会被拒绝
- 相对的模式：[[保护性暂停模式]]
- 实现的注意事项：
	-  **保证状态操作的原子性**
		- 原子性的范围：条件检查（`if (!condition)`）和后续的状态设置（`condition = true`）
	-  **确保状态变更的可见性**
	-  **确保初始化和状态通知的有序性**
	-  **保持临界区内代码精简**
- 实现方式：
	- 使用 synchronized 锁实现
	- 使用 volatile 变量实现
	-  使用 AtomicBoolean

- 实现不重复执行：[[double-cheched locking]]问题