### 事务简介
事务是一组操作的集合，它是一个不可分割的工作单位。事务会把所有操作作为一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。

以银行转账为例，张三向李四转账1000元，这个操作包含三个步骤：

1. 查询张三账户余额
    
2. 将张三账户金额减少1000元
    
3. 将李四账户金额增加1000元
    

如果所有步骤都成功执行，则提交事务，数据永久生效。如果在任何步骤出现异常（如余额不足、系统故障等），则回滚事务，撤销所有已执行的操作，账户余额恢复到事务开始前的状态。

在MySQL中，默认情况下每条DML语句（如INSERT、UPDATE、DELETE）都会自动提交事务。可以通过设置autocommit参数为0来关闭自动提交，改为手动控制事务。

事务的典型操作包括：

- START TRANSACTION：开始事务
    
- COMMIT：提交事务
    
- ROLLBACK：回滚事务
    

通过事务机制，可以确保数据库操作的一致性，避免出现部分操作成功、部分操作失败导致的数据不一致情况。
![[Pasted image 20251029151044.png]]

### 事务操作
 [[MySQL事务操作]]
[[Spring中事务]]

### 事务四大特性（ACID）
- 原子性（Atomicity）指事务是不可分割的最小操作单元，所有操作要么全部成功执行，要么全部失败回滚，不存在中间状态。

- 一致性（Consistency）要求事务完成后，数据库必须从一个一致状态转换到另一个一致状态，所有数据都符合预定义的规则和约束。

- 隔离性（Isolation）确保多个并发事务之间相互隔离，每个事务在独立环境下运行，不受其他事务的干扰，防止数据不一致。

- 持久性（Durability）表示事务一旦提交或回滚，其对数据库数据的修改就是永久性的，即使系统发生故障也不会丢失。
#### [[MySQL事务ACID的实现]]



### 并发事务
#### 常见的[[数据库并发问题]]
#### 解决方案：[[事务隔离级别]] 
权衡数据安全性和并发性：
	事务隔离级别是为了解决多个事务并发执行时可能引发的数据不一致问题。级别从低到高，数据一致性越强，但并发性能通常会降低。

---

