---
aliases:
  - STAB
  - 增量更新
---

- 漏标的发生背景：![[fb76b69f-a05b-4d7c-97e5-eb4c43172efd.png]]
	- 并发标记期间应用线程还在继续跑，**对象间的引用可能发生变化**，**多标**和**漏标**的情况就有可能发生
		- 浮动垃圾(多标)：将原本应该被清除的对象，误标记为存活对象。后果是垃圾回收不彻底，不过影响不大，可以在下个周期被回收
		- 对象消失(漏标)：**将原本应该存活的对象，误标记为需要清理的对象。后果很严重，影响程序运行，是不可容忍的。**
- 漏标必须要同时满足以下两个条件：
	- 赋值器插入了一条或者多条从黑色对象到白色对象的新引用
		- 原本要被回收的对象，此时需要被使用，不可以回收了
	- 赋值器删除了全部从灰色对象到该白色对象的直接或间接引用
		- 此时白色对象不可能被未完成扫描的灰色对象再次被扫描到
- 解决漏标的方式：破坏两个条件中的一个
	- **增量更新**：破坏的是第一个条件
	- **原始快照**：破坏的是第二个条件







