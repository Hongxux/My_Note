---
aliases:
  - RAID 5
---
![[Pasted image 20251009191356.png]]好的，作为知识整理大

---

### ​**RAID 级别详解：RAID 5（旋转奇偶校验）​**​

RAID 5 是为了解决 RAID 4 固有的“小写问题”而设计的改进版奇偶校验RAID方案。

#### ​**一、 核心原理：分布式奇偶校验**​

1. ​**基本机制**​
    
    - RAID 5 的工作机制与 RAID 4 几乎完全相同，都采用块级条带化和基于XOR的奇偶校验。
        
    - ​**关键改进**​：RAID 5 不再使用**专用校验盘**，而是将**校验块轮流（旋转）分布**到阵列中的所有磁盘上。
        
    - ​**示例**​：在一个5磁盘的RAID 5阵列中，第一个条带的校验块P0在磁盘4上，第二个条带的校验块P1在磁盘3上，第三个条带的P2在磁盘2上，依此类推。
        
    
2. ​**解决的核心问题**​
    
    - 这种设计彻底消除了RAID 4中专用校验盘带来的**写操作瓶颈**。由于校验块分散在各处，对不同条带的小写操作可以并行进行，因为它们现在涉及到不同的物理磁盘，而不再是争用同一个校验盘。
        
    

#### ​**二、 三维评估（与RAID 4的对比）​**​

1. ​**容量**​
    
    - ​**评估结果**​：与RAID 4相同。
        
    - ​**分析**​：有用容量仍为 ​**N-1**。因为无论校验块如何分布，整个阵列仍然只使用一个磁盘的等效容量来存储校验信息。
        
    
2. ​**可靠性**​
    
    - ​**评估结果**​：与RAID 4相同。
        
    - ​**分析**​：可以**容忍任意一块磁盘的故障**。
        
    
3. ​**性能**​
    
    - ​**顺序读/写吞吐量**​：与RAID 4相同，为 ​**​（N-1）· S**。在全条带写入时，性能表现良好。
        
    - ​**随机读吞吐量**​：​**优于RAID 4**，为 ​**N · R**。因为所有磁盘都存储数据，随机读请求可以均匀分布在所有磁盘上，利用率达到100%。
        
    - ​**随机写吞吐量**​：​**显著优于RAID 4**，约为 ​**​（N/4）· R**。
        
        - ​**原因**​：虽然每次小写操作仍然需要4次物理I/O（读取旧数据、旧校验，写入新数据、新校验），但由于校验块是分布的，多个针对不同条带的写请求可以**并行处理**​（例如，写条带1的请求访问磁盘1和3，写条带2的请求访问磁盘0和2，互不冲突）。
            
        - ​**性能计算**​：假设有N块磁盘，每块磁盘的随机写带宽为R。每次逻辑写操作会给整个阵列带来2次读和2次写，相当于4次I/O。当负载均匀分布时，每块磁盘的负担趋于平均。因此，整个阵列的聚合写带宽为 `(N * R) / 4`。
            
        
    - ​**单次请求延迟**​：与RAID 4相同，写延迟较高（约2倍单盘延迟）。
        
    

#### ​**三、 总结与市场定位**​

RAID 5 在保持与RAID 4相同的**容量效率**和**可靠性**的同时，通过**分布式校验**设计，极大地改善了**随机写入性能**，使其具备了可扩展性。

- ​**RAID 5 vs. RAID 4**​：由于RAID 5在绝大多数方面（尤其是关键的随机写性能）都优于或等于RAID 4，它已经在市场上**几乎完全取代了RAID 4**。
    
- ​**例外情况**​：只有在明确知道工作负载**完全不涉及随机小写操作**​（只有连续大块写入）的极端场景下，才可能因为结构简单而考虑使用RAID 4。
    

---
