
| 写入顺序                     | 发生时机（以更新语句为例）                           | 导致的直接问题                                     | 最终后果                                                                                   |
| ------------------------ | --------------------------------------- | ------------------------------------------- | -------------------------------------------------------------------------------------- |
| **先写redo log，后写binlog**​ | redo log写入成功，但binlog还未写入或写入失败时数据库崩溃<br> | 主库通过redo log恢复后，数据已更新；但binlog缺失该记录<br>      | **主从数据不一致**：从库无法同步此更新，数据比主库旧<br>**备份数据丢失**：用此binlog恢复的备份库会丢失这次更新<br>                   |
| **先写binlog，后写redo log**​ | binlog写入成功，但redo log还未写入时数据库崩溃          | binlog已记录更新；但主库因redo log未写入，崩溃恢复后事务无效，数据未更新 | **主从数据不一致**：从库执行了binlog，数据已更新；主库数据未变，从库数据比主库新<br>**数据凭空增多**：用此binlog恢复会多出一次本未成功的事务<br> |