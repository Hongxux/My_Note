---
aliases:
  - RAID 1
---

![[Pasted image 20251009190941.png]]
---

### ​**RAID 级别详解：RAID 1（镜像）​**​

RAID 1 通过数据冗余来实现高可靠性，是最直观的冗余磁盘阵列形式。

#### ​**一、 核心原理：数据镜像**​

1. ​**基本机制**​
    
    - 为每一个逻辑数据块创建多个完全相同的副本（镜像），并将每个副本存储在不同的物理磁盘上。
        
    - 最常见的配置是每个数据块保存两个副本（镜像级别为2）。
        
    - ​**示例**​：在一个4磁盘阵列中，逻辑块0的两个副本分别写入磁盘0和磁盘1，逻辑块1的两个副本分别写入磁盘2和磁盘3，依此类推。这种先组成镜像对，再条带化的方式常被称为 ​**RAID 10（1+0）​**。
        
    
2. ​**读写操作**​
    
    - ​**读操作**​：RAID控制器可以选择从存有该数据块的任意一个副本的磁盘上进行读取，这提供了读取优化的可能性。
        
    - ​**写操作**​：必须更新该数据块的**所有**副本，以确保数据一致性。这些写操作可以并行发生。
        
    
3. ​**关键问题：一致性更新**​
    
    - ​**问题**​：在向多个磁盘写入时，如果系统在写入过程（例如，刚写完第一个副本，尚未开始写第二个副本时）发生崩溃，会导致数据副本间不一致。
        
    - ​**解决方案**​：采用**预写日志**技术。在执行实际磁盘写入前，先将即将执行的操作记录在一个非易失性区域（通常是由电池供电的非易失性RAM），确保在崩溃恢复后能完成未完成的操作，保证所有副本的原子性（同时成功或失败）。
        
    

#### ​**二、 三维评估**​

1. ​**容量**​
    
    - ​**评估结果**​：成本高昂。
        
    - ​**分析**​：由于所有数据都存储了多个副本，有效容量为总磁盘容量除以副本数。在双副本镜像下，有用容量为 ​**N/2**，空间利用率为50%。
        
    
2. ​**可靠性**​
    
    - ​**评估结果**​：优秀。
        
    - ​**分析**​：可以**容忍至少一块磁盘的故障**。实际上，根据故障磁盘的组合，它有可能容忍最多N/2块磁盘的故障（例如，一个镜像对中只坏一块）。但在实践中，RAID 1 通常被认为能可靠地应对单盘故障。
        
    
3. ​**性能**​
    
    - ​**单次请求延迟**​：
        
        - ​**读延迟**​：与单块磁盘相近，因为只需从任意一个副本读取。
            
        - ​**写延迟**​：由于需要等待所有副本写入完成，延迟由最慢的那次物理写入决定，因此平均略高于单磁盘写入。
            
        
    - ​**稳态吞吐量**​：
        
        - ​**顺序写吞吐量**​：​**​（N/2）· S**。每个逻辑写操作都转化为两次物理写操作，尽管可以并行，但有效带宽减半。
            
        - ​**顺序读吞吐量**​：​**​（N/2）· S**。虽然理论上只需读一个副本，但由于数据是条带化分布在镜像对上的，为了实现顺序读取，每个磁盘实际接收的是跳跃的请求，无法达到单个磁盘的顺序读取峰值，因此总带宽同样约为峰值的一半。
            
        - ​**随机读吞吐量**​：​**N · R**。这是RAID 1的**优势场景**。控制器可以将大量的随机读请求均匀地分发到所有磁盘上，充分利用所有磁盘的随机I/O能力，达到聚合随机读性能的峰值。
            
        - ​**随机写吞吐量**​：​**​（N/2）· R**。每个逻辑写请求仍需更新两个副本，因此有效随机写带宽约为RAID 0的一半。
            
        
    

#### ​**三、 总结**​

RAID 1 通过**镜像**提供了极高的**可靠性**，并在此基础上了提供了优异的**随机读取性能**。然而，这是以牺牲**一半的存储容量**为代价的，并且**顺序和随机写入性能**也会因冗余写入而下降。它非常适合对数据安全性和读取性能要求高、但写入性能要求相对不极端的场景，如数据库日志文件、操作系统盘等。

---
